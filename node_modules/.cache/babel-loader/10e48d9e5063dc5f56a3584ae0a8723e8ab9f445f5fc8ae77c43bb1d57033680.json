{"ast":null,"code":"import _classCallCheck from\"C:/Users/91900/OneDrive/Desktop/capstone project backup copy/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/91900/OneDrive/Desktop/capstone project backup copy/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"C:/Users/91900/OneDrive/Desktop/capstone project backup copy/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"C:/Users/91900/OneDrive/Desktop/capstone project backup copy/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/91900/OneDrive/Desktop/capstone project backup copy/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Link}from'react-router-dom';import Book from'./Book';import Loader from'../ui/Loader/Loader';import*as BooksAPI from'../BooksAPI';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=/*#__PURE__*/function(_React$Component){_inherits(Search,_React$Component);var _super=_createSuper(Search);function Search(props){var _this;_classCallCheck(this,Search);_this=_super.call(this,props);_this.debouncer=_this.debounce();_this.state={searchInputValue:\"\"};_this.debouncer=_this.debouncer.bind(_assertThisInitialized(_this));return _this;}_createClass(Search,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.initializeSearchLoader();BooksAPI.getAll().then(function(data){_this2.props.handleShelfs(data,\"search\");});}},{key:\"debounce\",value:function debounce(){var timeout=null;return function(value){var _this3=this;if(timeout){clearTimeout(timeout);}timeout=setTimeout(function(){return _this3.generatesearchScreenUI(value);},1000);};}},{key:\"generatesearchScreenUI\",value:function generatesearchScreenUI(value){var _this4=this;BooksAPI.search(value).then(function(data){if(data.error){_this4.props.resetBooks();}else{_this4.props.setBooks(data);}});}},{key:\"searchInputTyping\",value:function searchInputTyping(e){this.props.initializeSearchLoader();this.setState({searchInputValue:e.target.value});var value=e.target.value.trim().toLowerCase();if(value){this.debouncer(value);}else{this.props.resetBooks();}}},{key:\"render\",value:function render(){var _this5=this;var _this$props=this.props,books=_this$props.books,shelfOptionSelected=_this$props.shelfOptionSelected,selectingOption=_this$props.selectingOption,selectMenuDisabled=_this$props.selectMenuDisabled;return/*#__PURE__*/_jsxs(\"div\",{className:\"search-books\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-books-bar\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{className:\"close-search\",children:\"Close\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"search-books-input-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title or author\",value:this.state.searchInputValue,onChange:function onChange(e){return _this5.searchInputTyping(e);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-books-results\",children:this.props.searchLoader?/*#__PURE__*/_jsx(Loader,{}):books.length>0?/*#__PURE__*/_jsx(\"ol\",{className:\"books-grid\",children:books.map(function(book){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Book,{book:book,shelfOptionSelected:shelfOptionSelected,selectingOption:selectingOption,selectMenuDisabled:selectMenuDisabled})},Math.random());})}):/*#__PURE__*/_jsx(\"div\",{style:{margin:\"auto\",textAlign:\"center\"},children:\"There are no search books\"})})]});}}]);return Search;}(React.Component);export{Search as default};","map":{"version":3,"names":["React","Link","Book","Loader","BooksAPI","jsx","_jsx","jsxs","_jsxs","Search","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","debouncer","debounce","state","searchInputValue","bind","_assertThisInitialized","_createClass","key","value","componentDidMount","_this2","initializeSearchLoader","getAll","then","data","handleShelfs","timeout","_this3","clearTimeout","setTimeout","generatesearchScreenUI","_this4","search","error","resetBooks","setBooks","searchInputTyping","e","setState","target","trim","toLowerCase","render","_this5","_this$props","books","shelfOptionSelected","selectingOption","selectMenuDisabled","className","children","to","type","placeholder","onChange","searchLoader","length","map","book","Math","random","style","margin","textAlign","Component","default"],"sources":["C:/Users/91900/OneDrive/Desktop/capstone project backup copy/frontend/src/components/Search.js"],"sourcesContent":["import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport Book from './Book';\r\nimport Loader from '../ui/Loader/Loader';\r\nimport * as BooksAPI from '../BooksAPI';\r\n\r\nexport default class Search extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsearchInputValue: \"\"\r\n\t\t}\r\n\r\n\t\tthis.debouncer = this.debouncer.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.initializeSearchLoader();\r\n\t\tBooksAPI.getAll().then(data =>{\r\n            this.props.handleShelfs(data, \"search\");\r\n        });\r\n\t}\r\n\r\n\tdebounce() {\r\n\t\tlet timeout = null;  \r\n\t\treturn function (value) {\r\n\t\t\tif (timeout) {\r\n\t\t\t\tclearTimeout(timeout);\r\n\t\t\t}\r\n\t\t  \ttimeout = setTimeout(() => this.generatesearchScreenUI(value), 1000);\r\n\t\t}\r\n\t}\r\n\t\r\n\tgeneratesearchScreenUI(value) {\r\n\t\tBooksAPI.search(value).then(data => {\r\n\t\t\tif(data.error) {\r\n\t\t\t\tthis.props.resetBooks();\r\n\t\t\t} else {\r\n\t\t\t\tthis.props.setBooks(data);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tdebouncer = this.debounce();\r\n\t\r\n\tsearchInputTyping(e) {\r\n\t\tthis.props.initializeSearchLoader();\r\n\t\tthis.setState({\r\n\t\t\tsearchInputValue: e.target.value\r\n\t\t});\r\n\t\tlet value = e.target.value.trim().toLowerCase();\r\n\t\tif (value) {\r\n\t\t\tthis.debouncer(value);\r\n\t\t} else {\r\n\t\t\tthis.props.resetBooks();\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {books, shelfOptionSelected, selectingOption, selectMenuDisabled} = this.props;\r\n\t\treturn (\r\n\t\t\t<div className=\"search-books\">\r\n\t\t\t\t<div className=\"search-books-bar\">\r\n\t\t\t\t\t<Link to=\"/\"><button className=\"close-search\">Close</button></Link>\r\n\t\t\t\t\t<div className=\"search-books-input-wrapper\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tplaceholder=\"Search by title or author\"\r\n\t\t\t\t\t\t\tvalue={this.state.searchInputValue}\r\n\t\t\t\t\t\t\tonChange={(e) => this.searchInputTyping(e)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"search-books-results\">\r\n\t\t\t\t\t{this.props.searchLoader ? <Loader /> : books.length > 0 ? (\r\n\t\t\t\t\t\t<ol className=\"books-grid\">\r\n\t\t\t\t\t\t\t{books.map(book => (\r\n\t\t\t\t\t\t\t\t<li key={Math.random()}>\r\n\t\t\t\t\t\t\t\t\t<Book \r\n\t\t\t\t\t\t\t\t\t\tbook={book}\r\n\t\t\t\t\t\t\t\t\t\tshelfOptionSelected={shelfOptionSelected}\r\n\t\t\t\t\t\t\t\t\t\tselectingOption={selectingOption}\r\n\t\t\t\t\t\t\t\t\t\tselectMenuDisabled={selectMenuDisabled}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t) : <div style={{margin: \"auto\", textAlign: \"center\"}}>There are no search books</div>}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}