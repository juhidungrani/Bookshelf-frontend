{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91900\\\\OneDrive\\\\Desktop\\\\capstone project backup copy\\\\frontend\\\\src\\\\components\\\\HomePage.js\";\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Loader from '../ui/Loader/Loader';\nimport Home from './Home';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HomePage = () => {\n  const history = useHistory();\n  const [data, setData] = useState(null);\n  const callHomePage = useCallback(async () => {\n    try {\n      const res = await fetch(\"/\", {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\"\n      });\n      if (!res.ok) {\n        // Check if the response is successful (status code 200-299)\n        const errorData = await res.json();\n        const error = new Error(errorData.error);\n        throw error;\n      }\n      const data = await res.json(); // Change jsonData to data\n      setData(data); // Set the fetched data in the state\n    } catch (err) {\n      console.log(err);\n      history.push(\"/register\");\n    }\n  }, [history]);\n  useEffect(() => {\n    callHomePage();\n  }, [callHomePage]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: data ? /*#__PURE__*/_jsxDEV(Home, {\n      shelfs: data.shelfs // Assuming the fetched data has a 'shelfs' property containing bookshelf information\n      // Pass other props as needed\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }, this)\n  }, void 0, false);\n};\nexport default HomePage;\n\n// const history=useHistory()\n\n// const callHomePage = async () => {\n\n//   try {\n//             const res = await fetch(\"/\", {\n//               method: \"GET\",\n//               headers: {\n//                 Accept: \"application/json\",\n//                 \"Content-Type\": \"application/json\",\n//               },\n//               credentials: \"include\",\n//             });\n//             const data = await res.json();\n//                     console.log(data);\n\n//                     if (!res.status === 200) {\n//                                 const error = new Error(res.error);\n//                                 throw error;\n//                               }\n//                             } catch (err) {\n//                               console.log(err);\n//                               history.push(\"/register\");\n//                             }\n//                           };\n\n//                  useEffect(()=>{\n//                     callHomePage();\n//                  },[]);","map":{"version":3,"names":["React","useEffect","useState","useCallback","useHistory","Loader","Home","jsxDEV","_jsxDEV","Fragment","_Fragment","HomePage","history","data","setData","callHomePage","res","fetch","method","headers","Accept","credentials","ok","errorData","json","error","Error","err","console","log","push","children","shelfs","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["C:/Users/91900/OneDrive/Desktop/capstone project backup copy/frontend/src/components/HomePage.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Loader from '../ui/Loader/Loader';\r\nimport Home from './Home';\r\n\r\nconst HomePage = () => {\r\n    const history = useHistory();\r\n    const [data, setData] = useState(null);\r\n  \r\n    const callHomePage = useCallback(async () => {\r\n        try {\r\n          const res = await fetch(\"/\", {\r\n            method: \"GET\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            credentials: \"include\",\r\n          });\r\n      \r\n          if (!res.ok) {\r\n            // Check if the response is successful (status code 200-299)\r\n            const errorData = await res.json();\r\n            const error = new Error(errorData.error);\r\n            throw error;\r\n          }\r\n      \r\n          const data = await res.json(); // Change jsonData to data\r\n          setData(data); // Set the fetched data in the state\r\n      \r\n        } catch (err) {\r\n          console.log(err);\r\n          history.push(\"/register\");\r\n        }\r\n      }, [history]);\r\n\r\n      useEffect(() => {\r\n        callHomePage();\r\n      }, [callHomePage]);\r\n    return (\r\n        <>\r\n        {data ? (\r\n          <Home\r\n            shelfs={data.shelfs} // Assuming the fetched data has a 'shelfs' property containing bookshelf information\r\n            // Pass other props as needed\r\n          />\r\n        ) : (\r\n          <Loader />\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n\r\n\r\nexport default HomePage\r\n\r\n\r\n\r\n// const history=useHistory()\r\n\r\n// const callHomePage = async () => {\r\n\r\n//   try {\r\n//             const res = await fetch(\"/\", {\r\n//               method: \"GET\",\r\n//               headers: {\r\n//                 Accept: \"application/json\",\r\n//                 \"Content-Type\": \"application/json\",\r\n//               },\r\n//               credentials: \"include\",\r\n//             });\r\n//             const data = await res.json();\r\n//                     console.log(data);\r\n\r\n//                     if (!res.status === 200) {\r\n//                                 const error = new Error(res.error);\r\n//                                 throw error;\r\n//                               }\r\n//                             } catch (err) {\r\n//                               console.log(err);\r\n//                               history.push(\"/register\");\r\n//                             }\r\n//                           };\r\n\r\n//                  useEffect(()=>{\r\n//                     callHomePage();\r\n//                  },[]);       \r\n\r\n                 "],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,OAAOC,MAAM,MAAM,qBAAqB;AACxC,OAAOC,IAAI,MAAM,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAE1B,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EACnB,MAAMC,OAAO,GAAGR,UAAU,CAAC,CAAC;EAC5B,MAAM,CAACS,IAAI,EAAEC,OAAO,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAEtC,MAAMa,YAAY,GAAGZ,WAAW,CAAC,YAAY;IACzC,IAAI;MACF,MAAMa,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAG,EAAE;QAC3BC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACPC,MAAM,EAAE,kBAAkB;UAC1B,cAAc,EAAE;QAClB,CAAC;QACDC,WAAW,EAAE;MACf,CAAC,CAAC;MAEF,IAAI,CAACL,GAAG,CAACM,EAAE,EAAE;QACX;QACA,MAAMC,SAAS,GAAG,MAAMP,GAAG,CAACQ,IAAI,CAAC,CAAC;QAClC,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAACH,SAAS,CAACE,KAAK,CAAC;QACxC,MAAMA,KAAK;MACb;MAEA,MAAMZ,IAAI,GAAG,MAAMG,GAAG,CAACQ,IAAI,CAAC,CAAC,CAAC,CAAC;MAC/BV,OAAO,CAACD,IAAI,CAAC,CAAC,CAAC;IAEjB,CAAC,CAAC,OAAOc,GAAG,EAAE;MACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChBf,OAAO,CAACkB,IAAI,CAAC,WAAW,CAAC;IAC3B;EACF,CAAC,EAAE,CAAClB,OAAO,CAAC,CAAC;EAEbX,SAAS,CAAC,MAAM;IACdc,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;EACpB,oBACIP,OAAA,CAAAE,SAAA;IAAAqB,QAAA,EACClB,IAAI,gBACHL,OAAA,CAACF,IAAI;MACH0B,MAAM,EAAEnB,IAAI,CAACmB,MAAO,CAAC;MACrB;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,gBAEF5B,OAAA,CAACH,MAAM;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EACV,gBACD,CAAC;AAEP,CAAC;AAIH,eAAezB,QAAQ;;AAIvB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}