{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/91900/OneDrive/Desktop/capstone project backup copy/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/91900/OneDrive/Desktop/capstone project backup copy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from\"react\";import Loader from\"../ui/Loader/Loader\";import Shelf from\"./Shelf\";import*as BooksAPI from\"../BooksAPI\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(_ref){var shelfs=_ref.shelfs,initializeHomeLoader=_ref.initializeHomeLoader,handleShelfs=_ref.handleShelfs,shelfOptionSelected=_ref.shelfOptionSelected,selectingOption=_ref.selectingOption,selectMenuDisabled=_ref.selectMenuDisabled,homeLoader=_ref.homeLoader,isAuthenticated=_ref.isAuthenticated,history=_ref.history;useEffect(function(){initializeHomeLoader();BooksAPI.getAll().then(function(data){handleShelfs(data,\"home\");});var callHomePage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!isAuthenticated){history.push(\"/signin\");}_context.next=4;return fetch(\"/\",{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}});case 4:res=_context.sent;_context.next=7;return res.json();case 7:data=_context.sent;console.log(data);if(!(res.status!==200)){_context.next=12;break;}error=new Error(res.error);throw error;case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 17:case\"end\":return _context.stop();}},_callee,null,[[0,14]]);}));return function callHomePage(){return _ref2.apply(this,arguments);};}();callHomePage();},[initializeHomeLoader,handleShelfs,isAuthenticated,history]);useEffect(function(){window.localStorage.setItem(\"shelfs\",JSON.stringify(shelfs));},[shelfs]);return/*#__PURE__*/_jsx(\"div\",{className:\"home-screen\",children:homeLoader?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[selectMenuDisabled&&/*#__PURE__*/_jsx(Loader,{className:\"select-shelf-loader\"}),/*#__PURE__*/_jsx(\"div\",{children:Object.keys(shelfs).map(function(shelf){return/*#__PURE__*/_jsx(Shelf,{id:shelf,shelfs:shelfs,shelfOptionSelected:shelfOptionSelected,selectingOption:selectingOption,selectMenuDisabled:selectMenuDisabled},shelf);})}),/*#__PURE__*/_jsx(\"div\",{className:\"open-search\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/search\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Add a book\"})})})]})});};export default Home;","map":{"version":3,"names":["React","useEffect","Loader","Shelf","BooksAPI","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Home","_ref","shelfs","initializeHomeLoader","handleShelfs","shelfOptionSelected","selectingOption","selectMenuDisabled","homeLoader","isAuthenticated","history","getAll","then","data","callHomePage","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","error","wrap","_callee$","_context","prev","next","push","fetch","method","headers","Accept","sent","json","console","log","status","Error","t0","stop","apply","arguments","window","localStorage","setItem","JSON","stringify","className","children","Object","keys","map","shelf","id","href"],"sources":["C:/Users/91900/OneDrive/Desktop/capstone project backup copy/frontend/src/components/Home.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Loader from \"../ui/Loader/Loader\";\r\nimport Shelf from \"./Shelf\";\r\nimport * as BooksAPI from \"../BooksAPI\";\r\n\r\n\r\nconst Home = ({\r\n  shelfs,\r\n  initializeHomeLoader,\r\n  handleShelfs,\r\n  shelfOptionSelected,\r\n  selectingOption,\r\n  selectMenuDisabled,\r\n  homeLoader,\r\n  isAuthenticated,\r\n  history,\r\n}) => {\r\n\r\n  useEffect(() => {\r\n    initializeHomeLoader();\r\n    BooksAPI.getAll().then((data) => {\r\n      handleShelfs(data, \"home\");\r\n    });\r\n\r\n    const callHomePage = async () => {\r\n      try {\r\n        if (!isAuthenticated) {\r\n          history.push(\"/signin\");\r\n        }\r\n\r\n        const res = await fetch(\"/\", {\r\n          method: \"GET\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        });\r\n\r\n        const data = await res.json();\r\n        console.log(data);\r\n\r\n        if (res.status !== 200) {\r\n          const error = new Error(res.error);\r\n          throw error;\r\n        }\r\n        // }\r\n      } catch (err) {\r\n        console.log(err);\r\n      \r\n      }\r\n    };\r\n\r\n    callHomePage();\r\n  }, [initializeHomeLoader, handleShelfs, isAuthenticated, history]);\r\n\r\n  useEffect(() => {\r\n    window.localStorage.setItem(\"shelfs\", JSON.stringify(shelfs));\r\n  }, [shelfs]);\r\n\r\n  return (\r\n    <div className=\"home-screen\">\r\n      {homeLoader ? (\r\n        <Loader />\r\n      ) : (\r\n        <>\r\n          {selectMenuDisabled && <Loader className=\"select-shelf-loader\" />}\r\n          <div>\r\n            {Object.keys(shelfs).map((shelf) => (\r\n              <Shelf\r\n                key={shelf}\r\n                id={shelf}\r\n                shelfs={shelfs}\r\n                shelfOptionSelected={shelfOptionSelected}\r\n                selectingOption={selectingOption}\r\n                selectMenuDisabled={selectMenuDisabled}\r\n              />\r\n            ))}\r\n          </div>\r\n          <div className=\"open-search\">\r\n            <a href=\"/search\">\r\n              <button>Add a book</button>\r\n            </a>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nHome.propTypes = {\r\n  shelfs: PropTypes.object.isRequired,\r\n  initializeHomeLoader: PropTypes.func.isRequired,\r\n  handleShelfs: PropTypes.func.isRequired,\r\n  shelfOptionSelected: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}